sudo: false
language: node_js
node_js: 12

git:
  depth: 10

os: 
  - linux
  - windows

install:
  - npm install
  - npm install -g codecov
  - node --version
  - npm --version
  #- msbuild -version -nologo # no global msbuild on Travis it seems
  #- where msbuild # no where as well it seems
  - IF NOT EXIST "%ProgramFiles(x86)%\Microsoft Visual Studio\Installer\vswhere.exe" ( echo "no vswhere" ) ELSE "%ProgramFiles(x86)%\Microsoft Visual Studio\Installer\vswhere" -property installationPath -products * -all"
  - IF NOT EXIST "%ProgramFiles(x86)%\Microsoft Visual Studio\Installer\vswhere.exe" ( echo "no vswhere" ) ELSE "%ProgramFiles(x86)%\Microsoft Visual Studio\Installer\vswhere" -property installationPath -all"
  - IF NOT EXIST "%ProgramFiles(x86)%\Microsoft Visual Studio\Installer\vswhere.exe" ( echo "no vswhere" ) ELSE "%ProgramFiles(x86)%\Microsoft Visual Studio\Installer\vswhere" -property installationPath -legacy"
  
script:
  - npm run eslint
  - npm test

after_script:
  - codecov
